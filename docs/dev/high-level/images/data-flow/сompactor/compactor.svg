<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="827px" preserveAspectRatio="none" style="width:699px;height:827px;background:#FFFFFF;" version="1.1" viewBox="0 0 699 827" width="699px" zoomAndPan="magnify"><title>Compactor</title><defs/><g><rect fill="#F5F5F5" height="777.8203" style="stroke:#181818;stroke-width:0.5;" width="194.8979" x="11" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170.8979" x="23" y="55.3638">CDT Server Namespace</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="85.4629" x="308.3929" y="27.9951">Compactor</text><rect fill="#FFE072" height="580.125" style="stroke:#FFE072;stroke-width:1;" width="575.958" x="54.449" y="196.9922"/><rect fill="#92C5F9" height="389.3281" style="stroke:#92C5F9;stroke-width:1;" width="444.7397" x="73.449" y="257.2578"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="260.9536" x2="210.2898" y1="308.0234" y2="341.5234"/><rect fill="#AFDC8F" height="227.7969" style="stroke:#AFDC8F;stroke-width:1;" width="400.7397" x="92.449" y="404.7891"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="292.8188" x2="294.8882" y1="568.9531" y2="602.4531"/><g><title>compactor</title><rect fill="#000000" fill-opacity="0.00000" height="690.3906" width="8" x="104.949" y="124.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="108.449" x2="108.449" y1="124.7266" y2="815.1172"/></g><g><title>PostgreSQL</title><rect fill="#000000" fill-opacity="0.00000" height="690.3906" width="8" x="473.6887" y="124.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="477.1887" x2="477.1887" y1="124.7266" y2="815.1172"/></g><g><title>S3 Compatible Storage</title><rect fill="#000000" fill-opacity="0.00000" height="690.3906" width="8" x="610.907" y="124.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="614.407" x2="614.407" y1="124.7266" y2="815.1172"/></g><rect fill="#FFF2CC" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88.874" x="64.012" y="93.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74.874" x="71.012" y="113.4248">compactor</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="433.8123" y="121.4248">PostgreSQL</text><path d="M459.1887,72.4297 C459.1887,62.4297 477.1887,62.4297 477.1887,62.4297 C477.1887,62.4297 495.1887,62.4297 495.1887,72.4297 L495.1887,98.4297 C495.1887,108.4297 477.1887,108.4297 477.1887,108.4297 C477.1887,108.4297 459.1887,108.4297 459.1887,98.4297 L459.1887,72.4297" fill="#FFFFFF" style="stroke:#181818;stroke-width:1.5;"/><path d="M459.1887,72.4297 C459.1887,82.4297 477.1887,82.4297 477.1887,82.4297 C477.1887,82.4297 495.1887,82.4297 495.1887,72.4297" fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161.6836" x="530.5652" y="121.4248">S3 Compatible Storage</text><path d="M596.407,72.4297 C596.407,62.4297 614.407,62.4297 614.407,62.4297 C614.407,62.4297 632.407,62.4297 632.407,72.4297 L632.407,98.4297 C632.407,108.4297 614.407,108.4297 614.407,108.4297 C614.407,108.4297 596.407,108.4297 596.407,98.4297 L596.407,72.4297" fill="#E05243" style="stroke:#181818;stroke-width:1.5;"/><path d="M596.407,72.4297 C596.407,82.4297 614.407,82.4297 614.407,82.4297 C614.407,82.4297 632.407,82.4297 632.407,72.4297" fill="none" style="stroke:#181818;stroke-width:1.5;"/><path d="M35.449,136.7266 L112.073,136.7266 L112.073,143.8594 L102.073,153.8594 L35.449,153.8594 L35.449,136.7266" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="654.3906" style="stroke:#000000;stroke-width:1.5;" width="619.958" x="35.449" y="136.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="50.449" y="149.7935">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="88.752" x="127.073" y="148.937">[Every 1 hour]</text><polygon fill="#181818" points="465.1887,180.9922,475.1887,184.9922,465.1887,188.9922,469.1887,184.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="471.1887" y1="184.9922" y2="184.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="115.449" y="179.9263">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.0781" x="128.4944" y="179.9263">Get namespaces</text><path d="M54.449,196.9922 L131.073,196.9922 L131.073,204.125 L121.073,214.125 L54.449,214.125 L54.449,196.9922" fill="#FFE072" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="580.125" style="stroke:#000000;stroke-width:1.5;" width="575.958" x="54.449" y="196.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="69.449" y="210.0591">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="142.8979" x="146.073" y="209.2026">[For every namespace]</text><polygon fill="#181818" points="465.1887,241.2578,475.1887,245.2578,465.1887,249.2578,469.1887,245.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="471.1887" y1="245.2578" y2="245.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="115.449" y="240.1919">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.6753" x="128.4944" y="240.1919">Get active pods for last hour</text><path d="M73.449,257.2578 L150.073,257.2578 L150.073,264.3906 L140.073,274.3906 L73.449,274.3906 L73.449,257.2578" fill="#92C5F9" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="389.3281" style="stroke:#000000;stroke-width:1.5;" width="444.7397" x="73.449" y="257.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="88.449" y="270.3247">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96.2017" x="165.073" y="269.4683">[For every pod]</text><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="150.449" y1="305.5234" y2="305.5234"/><line style="stroke:#181818;stroke-width:1;" x1="150.449" x2="150.449" y1="305.5234" y2="318.5234"/><line style="stroke:#181818;stroke-width:1;" x1="109.449" x2="150.449" y1="318.5234" y2="318.5234"/><polygon fill="#181818" points="119.449,314.5234,109.449,318.5234,119.449,322.5234,115.449,318.5234" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="115.449" y="300.4575">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277.9639" x="128.4944" y="300.4575">Create and open 8 parquet files for writing</text><path d="M113.449,341.5234 L113.449,366.5234 L306.449,366.5234 L306.449,351.5234 L296.449,341.5234 L113.449,341.5234" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M296.449,341.5234 L296.449,351.5234 L306.449,351.5234 L296.449,341.5234" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.6816" x="119.449" y="358.5903">For different call durations</text><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="260.9536" x2="210.2898" y1="308.0234" y2="341.5234"/><polygon fill="#181818" points="465.1887,388.7891,475.1887,392.7891,465.1887,396.7891,469.1887,392.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="471.1887" y1="392.7891" y2="392.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="115.449" y="387.7231">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.7056" x="128.4944" y="387.7231">Set parquet files status to "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="60.9375" x="307.2" y="387.7231">creating</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5.9795" x="368.1375" y="387.7231">"</text><path d="M92.449,404.7891 L169.073,404.7891 L169.073,411.9219 L159.073,421.9219 L92.449,421.9219 L92.449,404.7891" fill="#AFDC8F" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="227.7969" style="stroke:#000000;stroke-width:1.5;" width="400.7397" x="92.449" y="404.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="107.449" y="417.856">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94.3809" x="184.073" y="416.9995">[For every call]</text><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="150.449" y1="453.0547" y2="453.0547"/><line style="stroke:#181818;stroke-width:1;" x1="150.449" x2="150.449" y1="453.0547" y2="466.0547"/><line style="stroke:#181818;stroke-width:1;" x1="109.449" x2="150.449" y1="466.0547" y2="466.0547"/><polygon fill="#181818" points="119.449,462.0547,109.449,466.0547,119.449,470.0547,115.449,466.0547" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="115.449" y="447.9888">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254.4775" x="128.4944" y="447.9888">Start writing the call to the parquet file</text><polygon fill="#181818" points="465.1887,491.1875,475.1887,495.1875,465.1887,499.1875,469.1887,495.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="471.1887" y1="495.1875" y2="495.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="115.449" y="490.1216">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252.3574" x="128.4944" y="490.1216">Get corresponding trace &amp; dictionaries</text><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="150.449" y1="524.3203" y2="524.3203"/><line style="stroke:#181818;stroke-width:1;" x1="150.449" x2="150.449" y1="524.3203" y2="537.3203"/><line style="stroke:#181818;stroke-width:1;" x1="109.449" x2="150.449" y1="537.3203" y2="537.3203"/><polygon fill="#181818" points="119.449,533.3203,109.449,537.3203,119.449,541.3203,115.449,537.3203" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="115.449" y="519.2544">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230.5977" x="128.4944" y="519.2544">Parse trace &amp; prepare enriched call</text><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="150.449" y1="566.4531" y2="566.4531"/><line style="stroke:#181818;stroke-width:1;" x1="150.449" x2="150.449" y1="566.4531" y2="579.4531"/><line style="stroke:#181818;stroke-width:1;" x1="109.449" x2="150.449" y1="579.4531" y2="579.4531"/><polygon fill="#181818" points="119.449,575.4531,109.449,579.4531,119.449,583.4531,115.449,579.4531" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="115.449" y="561.3872">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="341.6943" x="128.4944" y="561.3872">Write the enriched call to corresponding parquet file</text><path d="M113.449,602.4531 L113.449,627.4531 L475.449,627.4531 L475.449,612.4531 L465.449,602.4531 L113.449,602.4531" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M465.449,602.4531 L465.449,612.4531 L475.449,612.4531 L465.449,602.4531" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="341.8784" x="119.449" y="619.52">Choose parquet file depending on the call's duration</text><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="292.8188" x2="294.8882" y1="568.9531" y2="602.4531"/><polygon fill="#181818" points="465.1887,677.7188,475.1887,681.7188,465.1887,685.7188,469.1887,681.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="471.1887" y1="681.7188" y2="681.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="115.449" y="676.6528">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.7056" x="128.4944" y="676.6528">Set parquet files status to "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56.0435" x="307.2" y="676.6528">created</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5.9795" x="363.2434" y="676.6528">"</text><polygon fill="#181818" points="465.1887,706.8516,475.1887,710.8516,465.1887,714.8516,469.1887,710.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="471.1887" y1="710.8516" y2="710.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="115.449" y="705.7856">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.7056" x="137.5398" y="705.7856">Set parquet files status to "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="88.7021" x="316.2454" y="705.7856">transferring</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5.9795" x="404.9475" y="705.7856">"</text><polygon fill="#181818" points="602.407,735.9844,612.407,739.9844,602.407,743.9844,606.407,739.9844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="608.407" y1="739.9844" y2="739.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="115.449" y="734.9185">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.2817" x="137.5398" y="734.9185">Save ready parquet files</text><polygon fill="#181818" points="465.1887,765.1172,475.1887,769.1172,465.1887,773.1172,469.1887,769.1172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.449" x2="471.1887" y1="769.1172" y2="769.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="115.449" y="764.0513">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178.7056" x="137.5398" y="764.0513">Set parquet files status to "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="77.0986" x="316.2454" y="764.0513">completed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5.9795" x="393.344" y="764.0513">"</text><!--SRC=[fLHTRzim37pNh-0SO0K23EYI1MlpCA1puhqCQmSNsBDYCRO0M_8akbttwqUhiHCbQ_TH6OOYcJmUJwUStLwlhfTmfHIqqdtla62hQmHFaZeFHILDYHwq0QeGLX-1RFYbj2oTR8HurJfPDX88xKyWrw6G7LdJDHjqej8AOMijRUmF8KWJ8wUsQML1rWd1kv2agrl8qTsXWo-oGSyVCO59jkWV0JoO6Eb2jz8G9CMGde1aViEA4x9ibgO2ZO9GJKcI6-aHaXlhgNIOV_qSSjfn2PFxIXCUXERpHtwaDqmrPs1POiZoSvYipnUpTtCXQcjRM3FZ1tWBbUrSeBddykR3GP4bV69HpT2Q3x4z0ZDUdx-VmJ1dd8a1T0mEiN_4vW_w3dbRUHRRGIqzxMcDvIvdwIAxX67Ub-F4CVAasBXOGkfG4e9aXMsB1YuYoppMldUQj2aZF6CvQsE9R1FjzwDdeVHsYmxvT0jPrw0wn_fRuwFW_bnx8F4qrKDTScOLizivclsRJAT5tmhpd4wJ630eTPMjqeiCXdclLC_lf8MdvCg9VJi84YvDQ6ztWGx9YUSnZy-xiCwnFwnH0TYnKU0rgrZqgacdqVyrnnlfsFO3HEkGQI5hxNHHeVgtVhznfnXwY_BxXcF6KUl7wC-PfHzfPQsFvGE5RCS0RSqez9aVdNG2D9hfQ7D_4D7YHIv35PdiVx7uZ8pdQ-9shlqjdfypZkJ_0Ywi7cAubtV3UJNk-XaqulSN]--></g></svg>