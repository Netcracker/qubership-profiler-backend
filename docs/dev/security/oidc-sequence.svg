<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1685px" preserveAspectRatio="none" style="width:1811px;height:1685px;background:#FFFFFF;" version="1.1" viewBox="0 0 1811 1685" width="1811px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="1673.5625" style="stroke:#181818;stroke-width:0.5;" width="230.4033" x="1" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="42.7388" x="94.8323" y="18.0669">Client</text><rect fill="#FFFFFF" height="174.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="993.1685" y="223.9609"/><rect fill="#FFFFFF" height="139.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="993.1685" y="563.6875"/><rect fill="#FFFFFF" height="167.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="993.1685" y="1051.2109"/><rect fill="#FFFFFF" height="79.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="993.1685" y="1489.6016"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1565.6558" y="368.8906"/><rect fill="#FFFFFF" height="64.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1565.6558" y="761.8828"/><rect fill="#FFFFFF" height="79.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1565.6558" y="913.5469"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1565.6558" y="1130.6094"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="56.4297" y2="1645.2656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="191.3643" x2="191.3643" y1="56.4297" y2="1645.2656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="501.3384" x2="501.3384" y1="56.4297" y2="1645.2656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="997.4932" x2="997.4932" y1="56.4297" y2="1645.2656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1570.1968" x2="1570.1968" y1="56.4297" y2="1645.2656"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45.9102" x="5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="12" y="45.1279">User</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45.9102" x="5" y="1644.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="12" y="1664.2607">User</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.0391" x="156.3643" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0391" x="163.3643" y="45.1279">Browser</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.0391" x="156.3643" y="1644.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0391" x="163.3643" y="1664.2607">Browser</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111.4736" x="446.3384" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.4736" x="453.3384" y="45.1279">Pre-app nginx</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111.4736" x="446.3384" y="1644.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97.4736" x="453.3384" y="1664.2607">Pre-app nginx</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41.3506" x="977.4932" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.3506" x="984.4932" y="45.1279">App</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="41.3506" x="977.4932" y="1644.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27.3506" x="984.4932" y="1664.2607">App</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.918" x="1532.1968" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.918" x="1539.1968" y="45.1279">Keycloak</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.918" x="1532.1968" y="1644.2656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.918" x="1539.1968" y="1664.2607">Keycloak</text><rect fill="#FFFFFF" height="174.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="993.1685" y="223.9609"/><rect fill="#FFFFFF" height="139.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="993.1685" y="563.6875"/><rect fill="#FFFFFF" height="167.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="993.1685" y="1051.2109"/><rect fill="#FFFFFF" height="79.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="993.1685" y="1489.6016"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1565.6558" y="368.8906"/><rect fill="#FFFFFF" height="64.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="1565.6558" y="761.8828"/><rect fill="#FFFFFF" height="79.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1565.6558" y="913.5469"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="1565.6558" y="1130.6094"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1804.7261" x="0" y="86.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1804.7261" y1="86.9961" y2="86.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1804.7261" y1="89.9961" y2="89.9961"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="93.4663" x="855.6299" y="76.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="74.9404" x="861.6299" y="92.4966">Build time</text><line style="stroke:#181818;stroke-width:1.0;" x1="998.1685" x2="1040.1685" y1="130.6953" y2="130.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="1040.1685" x2="1040.1685" y1="130.6953" y2="143.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="999.1685" x2="1040.1685" y1="143.6953" y2="143.6953"/><polygon fill="#181818" points="1009.1685,139.6953,999.1685,143.6953,1009.1685,147.6953,1005.1685,143.6953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1005.1685" y="125.6294">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="420.291" x="1027.2593" y="125.6294">Quarkus build (build time settings are baked in, oidc is disabled)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1804.7261" x="0" y="172.2617"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1804.7261" y1="172.2617" y2="172.2617"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1804.7261" y1="175.2617" y2="175.2617"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="79.457" x="862.6345" y="161.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="60.9312" x="868.6345" y="177.7622">Start-up</text><line style="stroke:#181818;stroke-width:1.0;" x1="998.1685" x2="1045.1685" y1="210.9609" y2="210.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="1045.1685" x2="1045.1685" y1="210.9609" y2="223.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="1004.1685" x2="1045.1685" y1="223.9609" y2="223.9609"/><polygon fill="#181818" points="1014.1685,219.9609,1004.1685,223.9609,1014.1685,227.9609,1010.1685,223.9609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1010.1685" y="205.895">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87.166" x="1032.2593" y="205.895">Docker starts</text><path d="M1008,241.9609 L1008,326.9609 L1262,326.9609 L1262,251.9609 L1252,241.9609 L1008,241.9609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1252,241.9609 L1252,251.9609 L1262,251.9609 L1252,241.9609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.4253" x="1014" y="259.0278">Re-augmentation:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1014" y="274.1606">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233.873" x="1014" y="289.2935">build time settings are re-evaluated</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.9316" x="1014" y="304.4263">oidc is enabled</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.1548" x="1014" y="319.5591">[oidc/reaugmentation]</text><polygon fill="#181818" points="1553.6558,364.8906,1563.6558,368.8906,1553.6558,372.8906,1557.6558,368.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1003.1685" x2="1559.6558" y1="368.8906" y2="368.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1010.1685" y="356.2583">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227.5254" x="1032.2593" y="348.6919">Quarkus gets keycloak information</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="271.7241" x="1032.2593" y="363.8247">[oidc/certificates, oidc/main-functionality]</text><polygon fill="#181818" points="1009.1685,394.0234,999.1685,398.0234,1009.1685,402.0234,1005.1685,398.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1003.1685" x2="1569.6558" y1="398.0234" y2="398.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1015.1685" y="392.9575">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="1037.2593" y="392.9575">&#160;</text><path d="M1003,411.0234 L1003,436.0234 L1191,436.0234 L1191,421.0234 L1181,411.0234 L1003,411.0234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1181,411.0234 L1181,421.0234 L1191,421.0234 L1181,411.0234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.1719" x="1009" y="428.0903">Ready to handle requests</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1804.7261" x="0" y="461.7227"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1804.7261" y1="461.7227" y2="461.7227"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1804.7261" y1="464.7227" y2="464.7227"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="238.7324" x="782.9968" y="451.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="220.2065" x="788.9968" y="467.2231">Request without valid session</text><polygon fill="#181818" points="179.8838,501.4219,189.8838,505.4219,179.8838,509.4219,183.8838,505.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="27.9551" x2="185.8838" y1="505.4219" y2="505.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="34.9551" y="500.356">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.3667" x="57.0459" y="500.356">Opens app's URL</text><polygon fill="#181818" points="490.0752,530.5547,500.0752,534.5547,490.0752,538.5547,494.0752,534.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="191.8838" x2="496.0752" y1="534.5547" y2="534.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="198.8838" y="529.4888">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.501" x="220.9746" y="529.4888">App's URL request</text><polygon fill="#181818" points="981.1685,559.6875,991.1685,563.6875,981.1685,567.6875,985.1685,563.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="502.0752" x2="987.1685" y1="563.6875" y2="563.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="509.0752" y="558.6216">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.501" x="531.166" y="558.6216">App's URL request</text><path d="M1008,576.6875 L1008,616.6875 L1272,616.6875 L1272,586.6875 L1262,576.6875 L1008,576.6875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1262,576.6875 L1262,586.6875 L1272,586.6875 L1262,576.6875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243.2739" x="1014" y="593.7544">Quarkus doesn't see token in cookies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.7451" x="1014" y="608.8872">[oidc/main-functionality]</text><polygon fill="#181818" points="513.0752,699.6172,503.0752,703.6172,513.0752,707.6172,509.0752,703.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.0752" x2="997.1685" y1="703.6172" y2="703.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="519.0752" y="668.2856">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="336.9399" x="541.166" y="638.02">Redirect to keycloak with origin link as a parameter</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="541.166" y="653.1528">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245.21" x="541.166" y="668.2856">Since we are behind proxy protocol is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="309.2896" x="541.166" y="683.4185">always http except when force-https is enabled</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="270.5244" x="541.166" y="698.5513">[oidc/main-functionality, oidc/force-https]</text><polygon fill="#181818" points="202.8838,728.75,192.8838,732.75,202.8838,736.75,198.8838,732.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="196.8838" x2="501.0752" y1="732.75" y2="732.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="208.8838" y="727.6841">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.2246" x="230.9746" y="727.6841">Redirect to keycloak</text><polygon fill="#181818" points="1553.6558,757.8828,1563.6558,761.8828,1553.6558,765.8828,1557.6558,761.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="191.8838" x2="1559.6558" y1="761.8828" y2="761.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="198.8838" y="756.8169">35</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.769" x="220.9746" y="756.8169">Handle redirect</text><path d="M1580,774.8828 L1580,799.8828 L1799,799.8828 L1799,784.8828 L1789,774.8828 L1580,774.8828 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1789,774.8828 L1789,784.8828 L1799,784.8828 L1789,774.8828 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198.7261" x="1586" y="791.9497">Keycloak doesn't have session</text><polygon fill="#181818" points="202.8838,822.1484,192.8838,826.1484,202.8838,830.1484,198.8838,826.1484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="196.8838" x2="1569.6558" y1="826.1484" y2="826.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="208.8838" y="821.0825">36</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71.8999" x="230.9746" y="821.0825">Login page</text><polygon fill="#181818" points="38.9551,851.2813,28.9551,855.2813,38.9551,859.2813,34.9551,855.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="32.9551" x2="190.8838" y1="855.2813" y2="855.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="44.9551" y="850.2153">37</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71.8999" x="67.0459" y="850.2153">Login page</text><polygon fill="#181818" points="179.8838,880.4141,189.8838,884.4141,179.8838,888.4141,183.8838,884.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="27.9551" x2="185.8838" y1="884.4141" y2="884.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="34.9551" y="879.3481">38</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.8379" x="57.0459" y="879.3481">Enters credentials</text><polygon fill="#181818" points="1553.6558,909.5469,1563.6558,913.5469,1553.6558,917.5469,1557.6558,913.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="191.8838" x2="1559.6558" y1="913.5469" y2="913.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="198.8838" y="908.481">39</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73.9692" x="220.9746" y="908.481">Credentials</text><path d="M1580,926.5469 L1580,966.5469 L1730,966.5469 L1730,936.5469 L1720,926.5469 L1580,926.5469 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1720,926.5469 L1720,936.5469 L1730,936.5469 L1720,926.5469 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.5684" x="1586" y="943.6138">Validate credentials</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.792" x="1586" y="958.7466">Establish session</text><polygon fill="#181818" points="202.8838,988.9453,192.8838,992.9453,202.8838,996.9453,198.8838,992.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="196.8838" x2="1569.6558" y1="992.9453" y2="992.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="208.8838" y="987.8794">40</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="521.5044" x="230.9746" y="987.8794">Redirect back to the app as part of oidc flow (with authorization-code-and-such)</text><polygon fill="#181818" points="490.0752,1018.0781,500.0752,1022.0781,490.0752,1026.0781,494.0752,1022.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="191.8838" x2="496.0752" y1="1022.0781" y2="1022.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="198.8838" y="1017.0122">41</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.769" x="220.9746" y="1017.0122">Handle redirect</text><polygon fill="#181818" points="981.1685,1047.2109,991.1685,1051.2109,981.1685,1055.2109,985.1685,1051.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="502.0752" x2="987.1685" y1="1051.2109" y2="1051.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="509.0752" y="1046.145">42</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="346.9121" x="531.166" y="1046.145">Request to the app with authorization-code-and-such</text><path d="M1008,1064.2109 L1008,1104.2109 L1476,1104.2109 L1476,1074.2109 L1466,1064.2109 L1008,1064.2109 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1466,1064.2109 L1466,1074.2109 L1476,1074.2109 L1466,1064.2109 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="393.0024" x="1014" y="1081.2778">Quarkus uses authorization-code-and-such from parameters</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="447.5859" x="1014" y="1096.4106">to generate request to keycloak for a token [oidc/main-functionality]</text><polygon fill="#181818" points="1553.6558,1126.6094,1563.6558,1130.6094,1553.6558,1134.6094,1557.6558,1130.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1003.1685" x2="1559.6558" y1="1130.6094" y2="1130.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1010.1685" y="1125.5435">43</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="521.3965" x="1032.2593" y="1125.5435">Token request [oidc/main-functionality, oidc/client-credentials, oidc/certificates]</text><polygon fill="#181818" points="1014.1685,1155.7422,1004.1685,1159.7422,1014.1685,1163.7422,1010.1685,1159.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1008.1685" x2="1569.6558" y1="1159.7422" y2="1159.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1020.1685" y="1154.6763">44</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39.6602" x="1042.2593" y="1154.6763">Token</text><polygon fill="#181818" points="513.0752,1215.1406,503.0752,1219.1406,513.0752,1223.1406,509.0752,1219.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.0752" x2="997.1685" y1="1219.1406" y2="1219.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="519.0752" y="1198.9419">45</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311.2764" x="541.166" y="1183.8091">Redirect to the origin link with token in cookies.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224.4468" x="541.166" y="1198.9419">Cookies has security-related flags.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="445.0024" x="541.166" y="1214.0747">[oidc/main-functionality, oidc/force-secure-cookies, oidc/force-https]</text><polygon fill="#181818" points="202.8838,1244.2734,192.8838,1248.2734,202.8838,1252.2734,198.8838,1248.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="196.8838" x2="501.0752" y1="1248.2734" y2="1248.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="208.8838" y="1243.2075">46</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264.1006" x="230.9746" y="1243.2075">Nginx passes cookie header [oidc/nginx]</text><path d="M196,1261.2734 L196,1361.2734 L481,1361.2734 L481,1271.2734 L471,1261.2734 L196,1261.2734 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M471,1261.2734 L471,1271.2734 L481,1271.2734 L471,1261.2734 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.9502" x="202" y="1278.3403">Now browser has cookies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.3311" x="202" y="1293.4731">and ready to execute</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260.5903" x="202" y="1308.606">redirect to original link (from step #30).</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="202" y="1323.7388">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.936" x="202" y="1338.8716">Go to step #51 (request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264.0562" x="202" y="1354.0044">with a valid session after user's request)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1804.7261" x="0" y="1387.6367"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1804.7261" y1="1387.6367" y2="1387.6367"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1804.7261" y1="1390.6367" y2="1390.6367"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="214.332" x="795.197" y="1377.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="195.8062" x="801.197" y="1393.1372">Request with valid session</text><polygon fill="#181818" points="179.8838,1427.3359,189.8838,1431.3359,179.8838,1435.3359,183.8838,1431.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="27.9551" x2="185.8838" y1="1431.3359" y2="1431.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="34.9551" y="1426.27">50</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.3667" x="57.0459" y="1426.27">Opens app's URL</text><polygon fill="#181818" points="490.0752,1456.4688,500.0752,1460.4688,490.0752,1464.4688,494.0752,1460.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="191.8838" x2="496.0752" y1="1460.4688" y2="1460.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="198.8838" y="1455.4028">51</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204.6802" x="220.9746" y="1455.4028">URL request + token in cookies</text><polygon fill="#181818" points="981.1685,1485.6016,991.1685,1489.6016,981.1685,1493.6016,985.1685,1489.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="502.0752" x2="987.1685" y1="1489.6016" y2="1489.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="509.0752" y="1484.5356">52</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264.1006" x="531.166" y="1484.5356">Nginx passes cookie header [oidc/nginx]</text><path d="M1008,1502.6016 L1008,1542.6016 L1261,1542.6016 L1261,1512.6016 L1251,1502.6016 L1008,1502.6016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1251,1502.6016 L1251,1512.6016 L1261,1512.6016 L1251,1502.6016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.0068" x="1014" y="1519.6685">Quarkus checks token from cookies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.7451" x="1014" y="1534.8013">[oidc/main-functionality]</text><polygon fill="#181818" points="513.0752,1565,503.0752,1569,513.0752,1573,509.0752,1569" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="507.0752" x2="997.1685" y1="1569" y2="1569"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="519.0752" y="1563.9341">53</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.96" x="541.166" y="1563.9341">Page content</text><polygon fill="#181818" points="202.8838,1594.1328,192.8838,1598.1328,202.8838,1602.1328,198.8838,1598.1328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="196.8838" x2="501.0752" y1="1598.1328" y2="1598.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="208.8838" y="1593.0669">54</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264.1006" x="230.9746" y="1593.0669">Nginx passes cookie header [oidc/nginx]</text><polygon fill="#181818" points="38.9551,1623.2656,28.9551,1627.2656,38.9551,1631.2656,34.9551,1627.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="32.9551" x2="190.8838" y1="1627.2656" y2="1627.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="44.9551" y="1622.1997">55</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.96" x="67.0459" y="1622.1997">Page content</text><!--SRC=[dLLDRzj64BtpLmoIWssuj986kGXmWCGDMg11cpfDBwKFo-M8N93SPVV3alBhExDBIfGbEnyNGvwTtNdptflXMUFzu9QBnT09xKFVNKdJBnp-5r1Bp2ibQYlwB2lD1cuwXTfdWx1UIJLGFdnsQ44u20VHTzQinuCoGrq1tJv8UFRHOYw60NIjzEOP9-g3XBTqHa5n4FmTjx8pekMJDikkh-5TK5q5NlK8rzTP9e8tElGbbNxvWlw5_0s89VmLX6q3OOdPv-N-aaFlbQwfa4KeHOiLAFqJ65L9K0ugvKJPONKHYttoX2KFmyDIF-zAmUNb4dunigMeusoNQUCHhAeRpqXkgUjGzyIYyChePQ4B_HWSOWZlHHU4nwhG4oJK4L6X_-N8mkBylRk4euqufgvhz4JNH9tIAsFxc3sz8P4eNYb9XLpgVT4BfVDLq9BpHAVyzYvh8Oyzvldog2jHRS4RQ8IkEaPExd7KV8M2NhYdXqb9fl0sdS1Q-SO43zIVggXjvwZEGrvV4Q-1-ocNyEU0ccWPXZC7dsy_P2N7zP9zaY9JqKplbJXnU81xOgWowFIP9nn8NRIeYIMGnhGAtKJIAKP4P4Gp8zHPfInAppJioEOsmL0zUgzJEXfN05bQzEZHilgV58qPh34v41j5qp9OizdoNs-awKZrWYgknTO13olWHk9073O4bCIaAOqpVC8Tnw17VMVNxfYnHFAf7XBJoL6_JVAcj3cRxHBsupdnsOXxdCGTxLD6iZuOPcGGDVBp50u7iKdqzvf8SY2f83bSYSxDqTpCmeT8_c5NiUbcDmlzdYQox9HhJaBQzLuAsJ81la7s6ql6EmZCAgs5LMVMS1wL9QysfEwNE4svD1LDjwvo5sHpiNFe4MbxVqxJCAlsjNSVSN2Wbfww1Yjh-htnY0sgMQD6opJPFOwTTSaXX39DmvCJCCdnTqoTdlgA_sJyakGpVQQ3sIuwM3df_KT7ZlcR3rhayU4iNnNw9lqYQpgoWGoMCEKMErwo9AseEUcRXYVUndny-icv-eC_SiI-OvNI1MXePzAEIwNYL_1khYtV8f-LuuUKuUuM4ebAF8yh5pU4msEXxOoDn8Je4XVdKNpdSO3dhrvSNF7Q-TLmNegzVWddesw5JWPyi9Z5Yap39hEqJyVKYwE5_lGsV_qDstosgk7oIBxvwFm0fRDnaGtAreq58ZlVkUq_qfgYExIVjFz-dNSxx-2P_m40]--></g></svg>